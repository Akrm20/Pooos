<!DOCTYPE html>
<html lang="ar" dir="rtl" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุงููุญุงุณุจุฉ - Micro ERP</title>
    
    <!-- ุฑูุงุจุท CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="M-accounting.css">
</head>
<body>
    <!-- ========== ุงููููู ุงูุฃุณุงุณู ========== -->
    <div class="header d-flex justify-content-between align-items-center px-3">
        <div>
            <button class="btn btn-outline-secondary btn-sm" id="themeToggle">
                <i class="bi bi-sun" id="themeIcon"></i>
            </button>
            <button class="btn btn-outline-primary btn-sm ms-2" onclick="location.href='index.html'">
                <i class="bi bi-cart"></i> ุงูุฑุฆูุณูุฉ
            </button>
        </div>
        <h4 class="mb-0">๐ ูุธุงู ุงููุญุงุณุจุฉ</h4>
        <div>
            <span class="badge bg-info me-2">ุงููุชุฑุฉ: <span id="currentPeriod">2025</span></span>
            <span class="badge bg-success" id="accountingStatus">ูุดุท</span>
        </div>
    </div>

    <!-- ========== ุงูุฃุฒุฑุงุฑ ุงูุณุฑูุนุฉ ========== -->
    <div class="quick-actions-bar">
        <div class="container-fluid">
            <div class="row g-2">
                <div class="col-md-3">
                    <button class="btn btn-success w-100" id="collectFromCustomersBtn">
                        <i class="bi bi-cash-coin"></i> ุชุญุตูู ูู ุงูุนููุงุก
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-primary w-100" id="paySuppliersBtn">
                        <i class="bi bi-credit-card"></i> ุณุฏุงุฏ ุงูููุฑุฏูู
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-warning w-100" id="salesReturnBtn">
                        <i class="bi bi-arrow-return-left"></i> ูุฑุชุฌุน ูุจูุนุงุช
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-danger w-100" id="purchaseReturnBtn">
                        <i class="bi bi-arrow-return-right"></i> ูุฑุชุฌุน ูุดุชุฑูุงุช
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== ุงููุญุชูู ุงูุฑุฆูุณู ========== -->
    <div class="main-content" id="mainContent">
        <div class="container-fluid py-4">
            <!-- ========== ุชุจููุจุงุช ุงููุญุงุณุจุฉ ========== -->
            <ul class="nav nav-tabs" id="accountingTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="chart-tab" data-bs-toggle="tab" data-bs-target="#chart-tab-pane" type="button">
                        <i class="bi bi-diagram-3"></i> ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="journal-tab" data-bs-toggle="tab" data-bs-target="#journal-tab-pane" type="button">
                        <i class="bi bi-journal"></i> ุงููููุฏ ุงูููููุฉ
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="ledger-tab" data-bs-toggle="tab" data-bs-target="#ledger-tab-pane" type="button">
                        <i class="bi bi-book"></i> ุงูุงุณุชุงุฐ ุงูุนุงู
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="trial-tab" data-bs-toggle="tab" data-bs-target="#trial-tab-pane" type="button">
                        <i class="bi bi-scale"></i> ููุฒุงู ุงููุฑุงุฌุนุฉ
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="tax-tab" data-bs-toggle="tab" data-bs-target="#tax-tab-pane" type="button">
                        <i class="bi bi-percent"></i> ุชุณููุฉ ุงูุถุฑุงุฆุจ
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="accountingTabContent">
                <!-- ========== ุชุจููุจ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ========== -->
                <div class="tab-pane fade show active" id="chart-tab-pane" role="tabpanel">
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ุฅุถุงูุฉ/ุชุนุฏูู ุญุณุงุจ</h5>
                                    <button class="btn btn-sm btn-outline-success" id="refreshAccountsBtn">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <form id="accountForm">
                                        <input type="hidden" id="accountId">
                                        <div class="mb-3">
                                            <label class="form-label">ุฑูู ุงูุญุณุงุจ *</label>
                                            <input type="text" class="form-control" id="accountCode" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุงุณู ุงูุญุณุงุจ *</label>
                                            <input type="text" class="form-control" id="accountName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ููุน ุงูุญุณุงุจ *</label>
                                            <select class="form-select" id="accountType" required>
                                                <option value="">ุงุฎุชุฑ ุงูููุน</option>
                                                <option value="asset">ุฃุตูู</option>
                                                <option value="liability">ุฎุตูู</option>
                                                <option value="equity">ุญููู ููููุฉ</option>
                                                <option value="revenue">ุฅูุฑุงุฏุงุช</option>
                                                <option value="expense">ูุตุฑููุงุช</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุงูุญุณุงุจ ุงูุฑุฆูุณู</label>
                                            <select class="form-select" id="accountParent">
                                                <option value="">ุญุณุงุจ ุฑุฆูุณู</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุงููุตู</label>
                                            <textarea class="form-control" id="accountDescription" rows="2"></textarea>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู</label>
                                            <input type="number" class="form-control" id="accountOpeningBalance" value="0" step="0.01">
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button type="button" class="btn btn-primary" id="saveAccountBtn">ุญูุธ ุงูุญุณุงุจ</button>
                                            <button type="button" class="btn btn-outline-secondary" id="resetAccountBtn">ุฌุฏูุฏ</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- ููุฎุต ุงูุญุณุงุจุงุช -->
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h6 class="mb-0">ููุฎุต ุงูุญุณุงุจุงุช</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="summary-item">
                                                <div class="summary-label">ุงูุฃุตูู</div>
                                                <div class="summary-value text-success" id="assetsTotal">0.00</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="summary-item">
                                                <div class="summary-label">ุงูุฎุตูู</div>
                                                <div class="summary-value text-danger" id="liabilitiesTotal">0.00</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="summary-item">
                                                <div class="summary-label">ุญููู ุงูููููุฉ</div>
                                                <div class="summary-value text-primary" id="equityTotal">0.00</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="summary-item">
                                                <div class="summary-label">ุตุงูู ุงูุฑุจุญ</div>
                                                <div class="summary-value text-info" id="netProfit">0.00</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ุดุฌุฑุฉ ุงูุญุณุงุจุงุช</h5>
                                    <div>
                                        <button class="btn btn-sm btn-outline-primary me-2" id="expandAllBtn">
                                            <i class="bi bi-plus-circle"></i> ุชูุณูุน ุงููู
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" id="collapseAllBtn">
                                            <i class="bi bi-dash-circle"></i> ุทู ุงููู
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="accountsTable">
                                            <thead>
                                                <tr>
                                                    <th width="15%">ุฑูู ุงูุญุณุงุจ</th>
                                                    <th>ุงุณู ุงูุญุณุงุจ</th>
                                                    <th width="15%">ุงูููุน</th>
                                                    <th width="15%" class="text-end">ุงูุฑุตูุฏ</th>
                                                    <th width="10%">ุงูุฅุฌุฑุงุกุงุช</th>
                                                </tr>
                                            </thead>
                                            <tbody id="accountsTableBody">
                                                <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== ุชุจููุจ ุงููููุฏ ุงูููููุฉ ========== -->
                <div class="tab-pane fade" id="journal-tab-pane" role="tabpanel">
                    <div class="row mt-4">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ููุฏ ููููุฉ ุฌุฏูุฏ</h5>
                                    <div class="balance-status" id="journalBalanceStatus">
                                        <span class="badge bg-danger">ุบูุฑ ูุชูุงุฒู</span>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <form id="journalEntryForm">
                                        <div class="row mb-3">
                                            <div class="col-md-4">
                                                <label class="form-label">ุงูุชุงุฑูุฎ *</label>
                                                <input type="date" class="form-control" id="journalDate" required>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">ุงููุฑุฌุน *</label>
                                                <input type="text" class="form-control" id="journalReference" required>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">ุงููุตู *</label>
                                                <input type="text" class="form-control" id="journalDescription" required>
                                            </div>
                                        </div>
                                        
                                        <div class="journal-entries">
                                            <div class="entry-header">
                                                <div class="row">
                                                    <div class="col-md-5">ุงูุญุณุงุจ</div>
                                                    <div class="col-md-3 text-center">ูุฏูู</div>
                                                    <div class="col-md-3 text-center">ุฏุงุฆู</div>
                                                    <div class="col-md-1"></div>
                                                </div>
                                            </div>
                                            <div id="journalEntriesContainer">
                                                <!-- ุณูุชู ุฅุถุงูุฉ ุงูุฃุณุทุฑ ุฏููุงููููุงู -->
                                            </div>
                                            <div class="entry-footer">
                                                <button type="button" class="btn btn-sm btn-outline-primary" id="addJournalLineBtn">
                                                    <i class="bi bi-plus-circle"></i> ุฅุถุงูุฉ ุณุทุฑ
                                                </button>
                                                <div class="totals">
                                                    <span>ุฅุฌูุงูู ุงููุฏูู: <strong id="totalDebit">0.00</strong></span>
                                                    <span>ุฅุฌูุงูู ุงูุฏุงุฆู: <strong id="totalCredit">0.00</strong></span>
                                                    <span>ุงููุฑู: <strong id="balanceDifference">0.00</strong></span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2 mt-3">
                                            <button type="button" class="btn btn-success" id="saveJournalBtn" disabled>
                                                <i class="bi bi-check-circle"></i> ุญูุธ ุงูููุฏ
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <!-- ูุงุฆูุฉ ุงููููุฏ ุงูุฃุฎูุฑุฉ -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">ุขุฎุฑ ุงููููุฏ</h5>
                                </div>
                                <div class="card-body">
                                    <div id="recentJournalsList">
                                        <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ุฃููุงุน ุงููููุฏ -->
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h6 class="mb-0">ุฃููุงุน ุงููููุฏ ุงูุณุฑูุนุฉ</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-outline-success" id="quickReceiptBtn">
                                            <i class="bi bi-cash"></i> ููุฏ ุณูุฏ ูุจุถ
                                        </button>
                                        <button class="btn btn-outline-primary" id="quickPaymentBtn">
                                            <i class="bi bi-credit-card"></i> ููุฏ ุณูุฏ ุตุฑู
                                        </button>
                                        <button class="btn btn-outline-warning" id="quickTransferBtn">
                                            <i class="bi bi-arrow-left-right"></i> ููุฏ ุชุญููู
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุฌุฏูู ุฌููุน ุงููููุฏ -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0">ุณุฌู ุงููููุฏ ุงูููููุฉ</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="journalsTable">
                                    <thead>
                                        <tr>
                                            <th width="10%">ุงูุชุงุฑูุฎ</th>
                                            <th width="15%">ุงููุฑุฌุน</th>
                                            <th>ุงููุตู</th>
                                            <th width="15%" class="text-end">ุงููุฏูู</th>
                                            <th width="15%" class="text-end">ุงูุฏุงุฆู</th>
                                            <th width="10%">ุงูุฅุฌุฑุงุกุงุช</th>
                                        </tr>
                                    </thead>
                                    <tbody id="journalsTableBody">
                                        <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== ุชุจููุจ ุงูุงุณุชุงุฐ ุงูุนุงู ========== -->
                <div class="tab-pane fade" id="ledger-tab-pane" role="tabpanel">
                    <div class="row mt-4">
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">ุงุฎุชูุงุฑ ุงูุญุณุงุจ</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <select class="form-select" id="ledgerAccountSelect">
                                            <option value="">ุงุฎุชุฑ ุงูุญุณุงุจ...</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">ูู ุชุงุฑูุฎ</label>
                                        <input type="date" class="form-control" id="ledgerFromDate">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">ุฅูู ุชุงุฑูุฎ</label>
                                        <input type="date" class="form-control" id="ledgerToDate">
                                    </div>
                                    <button class="btn btn-primary w-100" id="showLedgerBtn">ุนุฑุถ ุงูุงุณุชุงุฐ</button>
                                    
                                    <div class="mt-4">
                                        <h6>ูุนูููุงุช ุงูุญุณุงุจ</h6>
                                        <div class="account-info">
                                            <div><strong>ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู:</strong> <span id="openingBalance">0.00</span></div>
                                            <div><strong>ุฅุฌูุงูู ุงูุญุฑูุงุช:</strong> <span id="totalMovements">0</span></div>
                                            <div><strong>ุงูุฑุตูุฏ ุงูุญุงูู:</strong> <span id="currentBalance">0.00</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-9">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ุงุณุชุงุฐ ุญุณุงุจ: <span id="selectedAccountName">-</span></h5>
                                    <button class="btn btn-sm btn-outline-primary" id="printLedgerBtn">
                                        <i class="bi bi-printer"></i> ุทุจุงุนุฉ
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="ledgerTable">
                                            <thead>
                                                <tr>
                                                    <th width="10%">ุงูุชุงุฑูุฎ</th>
                                                    <th width="15%">ุงููุฑุฌุน</th>
                                                    <th>ุงููุตู</th>
                                                    <th width="15%" class="text-end">ูุฏูู</th>
                                                    <th width="15%" class="text-end">ุฏุงุฆู</th>
                                                    <th width="15%" class="text-end">ุงูุฑุตูุฏ</th>
                                                </tr>
                                            </thead>
                                            <tbody id="ledgerTableBody">
                                                <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                            </tbody>
                                            <tfoot>
                                                <tr class="table-light">
                                                    <td colspan="3" class="text-end"><strong>ุงููุฌููุน:</strong></td>
                                                    <td class="text-end"><strong id="ledgerTotalDebit">0.00</strong></td>
                                                    <td class="text-end"><strong id="ledgerTotalCredit">0.00</strong></td>
                                                    <td class="text-end"><strong id="ledgerFinalBalance">0.00</strong></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== ุชุจููุจ ููุฒุงู ุงููุฑุงุฌุนุฉ ========== -->
                <div class="tab-pane fade" id="trial-tab-pane" role="tabpanel">
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ููุฒุงู ุงููุฑุงุฌุนุฉ</h5>
                                    <div>
                                        <input type="date" class="form-control d-inline w-auto" id="trialBalanceDate" value="">
                                        <button class="btn btn-sm btn-primary ms-2" id="generateTrialBalanceBtn">
                                            <i class="bi bi-arrow-clockwise"></i> ุชูููุฏ
                                        </button>
                                        <button class="btn btn-sm btn-outline-success ms-2" id="printTrialBalanceBtn">
                                            <i class="bi bi-printer"></i> ุทุจุงุนุฉ
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered" id="trialBalanceTable">
                                            <thead class="table-light">
                                                <tr>
                                                    <th rowspan="2">ุฑูู ุงูุญุณุงุจ</th>
                                                    <th rowspan="2">ุงุณู ุงูุญุณุงุจ</th>
                                                    <th colspan="2" class="text-center">ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ</th>
                                                    <th colspan="2" class="text-center">ุงูุญุฑูุงุช ุฎูุงู ุงููุชุฑุฉ</th>
                                                    <th colspan="2" class="text-center">ุงูุฃุฑุตุฏุฉ ุงูุฎุชุงููุฉ</th>
                                                </tr>
                                                <tr>
                                                    <th class="text-center">ูุฏูู</th>
                                                    <th class="text-center">ุฏุงุฆู</th>
                                                    <th class="text-center">ูุฏูู</th>
                                                    <th class="text-center">ุฏุงุฆู</th>
                                                    <th class="text-center">ูุฏูู</th>
                                                    <th class="text-center">ุฏุงุฆู</th>
                                                </tr>
                                            </thead>
                                            <tbody id="trialBalanceTableBody">
                                                <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                            </tbody>
                                            <tfoot class="table-light">
                                                <tr>
                                                    <td colspan="2" class="text-end"><strong>ุงููุฌููุน:</strong></td>
                                                    <td class="text-center"><strong id="tbOpeningDebit">0.00</strong></td>
                                                    <td class="text-center"><strong id="tbOpeningCredit">0.00</strong></td>
                                                    <td class="text-center"><strong id="tbMovementDebit">0.00</strong></td>
                                                    <td class="text-center"><strong id="tbMovementCredit">0.00</strong></td>
                                                    <td class="text-center"><strong id="tbClosingDebit">0.00</strong></td>
                                                    <td class="text-center"><strong id="tbClosingCredit">0.00</strong></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    
                                    <!-- ููุฎุต ููุฒุงู ุงููุฑุงุฌุนุฉ -->
                                    <div class="row mt-4">
                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0">ุงูุชุญูู ูู ุงูุชูุงุฒู</h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="balance-check">
                                                        <div class="mb-2">
                                                            <strong>ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ:</strong>
                                                            <span class="float-end" id="checkOpening">0.00 = 0.00 โ</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุงูุญุฑูุงุช ุฎูุงู ุงููุชุฑุฉ:</strong>
                                                            <span class="float-end" id="checkMovements">0.00 = 0.00 โ</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุงูุฃุฑุตุฏุฉ ุงูุฎุชุงููุฉ:</strong>
                                                            <span class="float-end" id="checkClosing">0.00 = 0.00 โ</span>
                                                        </div>
                                                        <div class="alert alert-success mt-3" id="balanceCheckResult">
                                                            โ ุงูููุฒุงู ูุชูุงุฒู
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h6 class="mb-0">ุงููุฌููุนุงุช ุงูุฑุฆูุณูุฉ</h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="account-group">
                                                        <div class="mb-2">
                                                            <strong>ุงูุฃุตูู:</strong>
                                                            <span class="float-end text-success" id="tbAssetsTotal">0.00</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุงูุฎุตูู:</strong>
                                                            <span class="float-end text-danger" id="tbLiabilitiesTotal">0.00</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุญููู ุงูููููุฉ:</strong>
                                                            <span class="float-end text-primary" id="tbEquityTotal">0.00</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุงูุฅูุฑุงุฏุงุช:</strong>
                                                            <span class="float-end text-info" id="tbRevenueTotal">0.00</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <strong>ุงููุตุฑููุงุช:</strong>
                                                            <span class="float-end text-warning" id="tbExpenseTotal">0.00</span>
                                                        </div>
                                                        <div class="border-top pt-2 mt-2">
                                                            <strong>ุตุงูู ุงูุฏุฎู:</strong>
                                                            <span class="float-end" id="tbNetIncome">0.00</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========== ุชุจููุจ ุชุณููุฉ ุงูุถุฑุงุฆุจ ========== -->
                <div class="tab-pane fade" id="tax-tab-pane" role="tabpanel">
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">ุญุณุงุจุงุช ุงูุถุฑุงุฆุจ</h5>
                                </div>
                                <div class="card-body">
                                    <div class="tax-accounts">
                                        <div class="tax-account-item">
                                            <div class="tax-account-name">ุถุฑูุจุฉ ุงููุฎุฑุฌุงุช (ุงููุจูุนุงุช)</div>
                                            <div class="tax-account-balance text-danger" id="taxOutputBalance">0.00</div>
                                            <div class="tax-account-code">2041</div>
                                        </div>
                                        <div class="tax-account-item">
                                            <div class="tax-account-name">ุถุฑูุจุฉ ุงููุฏุฎูุงุช (ุงููุดุชุฑูุงุช)</div>
                                            <div class="tax-account-balance text-success" id="taxInputBalance">0.00</div>
                                            <div class="tax-account-code">1070</div>
                                        </div>
                                        <div class="tax-account-summary mt-3 p-3 bg-light">
                                            <div class="d-flex justify-content-between">
                                                <strong>ุตุงูู ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ:</strong>
                                                <span class="text-danger" id="netTaxPayable">0.00</span>
                                            </div>
                                            <div class="d-flex justify-content-between mt-2">
                                                <strong>ุญุงูุฉ ุงูุชุณููุฉ:</strong>
                                                <span class="badge bg-success" id="taxSettlementStatus">ูุฏููุนุฉ</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ุชุณููุฉ ุงูุถุฑูุจุฉ -->
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">ุชุณููุฉ ุงูุถุฑูุจุฉ</h5>
                                </div>
                                <div class="card-body">
                                    <form id="taxSettlementForm">
                                        <div class="mb-3">
                                            <label class="form-label">ุชุงุฑูุฎ ุงูุชุณููุฉ *</label>
                                            <input type="date" class="form-control" id="taxSettlementDate" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ูุจูุบ ุงูุชุณููุฉ *</label>
                                            <input type="number" class="form-control" id="taxSettlementAmount" required step="0.01">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุทุฑููุฉ ุงูุฏูุน *</label>
                                            <select class="form-select" id="taxPaymentMethod" required>
                                                <option value="cash">ููุฏู</option>
                                                <option value="bank">ุจููู</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ุงููุฑุฌุน</label>
                                            <input type="text" class="form-control" id="taxSettlementReference">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ููุงุญุธุงุช</label>
                                            <textarea class="form-control" id="taxSettlementNotes" rows="2"></textarea>
                                        </div>
                                        <button type="button" class="btn btn-success w-100" id="settleTaxBtn">
                                            <i class="bi bi-check-circle"></i> ุชุณููุฉ ุงูุถุฑูุจุฉ
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <!-- ุณุฌู ุชุณููุงุช ุงูุถุฑุงุฆุจ -->
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ุณุฌู ุงูุชุณููุงุช</h5>
                                    <button class="btn btn-sm btn-outline-primary" id="refreshTaxSettlementsBtn">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="taxSettlementsTable">
                                            <thead>
                                                <tr>
                                                    <th>ุงูุชุงุฑูุฎ</th>
                                                    <th>ุงููุจูุบ</th>
                                                    <th>ุงูุทุฑููุฉ</th>
                                                    <th>ุงูุญุงูุฉ</th>
                                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                                </tr>
                                            </thead>
                                            <tbody id="taxSettlementsTableBody">
                                                <!-- ุณูุชู ุชุนุจุฆุชูุง ุฏููุงููููุงู -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ุชูุฑูุฑ ุงูุถุฑูุจุฉ -->
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">ุชูุฑูุฑ ุงูุถุฑูุจุฉ</h5>
                                </div>
                                <div class="card-body">
                                    <div class="tax-report">
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <label>ุงููุชุฑุฉ ูู:</label>
                                                <input type="date" class="form-control" id="taxReportFromDate">
                                            </div>
                                            <div class="col-6">
                                                <label>ุงููุชุฑุฉ ุฅูู:</label>
                                                <input type="date" class="form-control" id="taxReportToDate">
                                            </div>
                                        </div>
                                        <div class="tax-report-summary">
                                            <div class="mb-2">
                                                <strong>ุฅุฌูุงูู ุถุฑูุจุฉ ุงููุจูุนุงุช:</strong>
                                                <span class="float-end text-danger" id="totalTaxSales">0.00</span>
                                            </div>
                                            <div class="mb-2">
                                                <strong>ุฅุฌูุงูู ุถุฑูุจุฉ ุงููุดุชุฑูุงุช:</strong>
                                                <span class="float-end text-success" id="totalTaxPurchases">0.00</span>
                                            </div>
                                            <div class="mb-2 border-top pt-2">
                                                <strong>ุตุงูู ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ:</strong>
                                                <span class="float-end" id="reportNetTax">0.00</span>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary w-100 mt-3" id="generateTaxReportBtn">
                                            <i class="bi bi-file-earmark-text"></i> ุชูููุฏ ุงูุชูุฑูุฑ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== ุงูููุงูุฐ ุงูููุจุซูุฉ ููุนูููุงุช ุงูุณุฑูุนุฉ ========== -->
    
    <!-- ูุงูุฐุฉ ุชุญุตูู ูู ุงูุนููุงุก -->
    <div class="modal fade" id="collectFromCustomersModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ุชุญุตูู ูู ุงูุนููุงุก</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="collectForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ุงูุนููู *</label>
                                <select class="form-select" id="collectCustomerSelect" required>
                                    <option value="">ุงุฎุชุฑ ุงูุนููู...</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงููุจูุบ *</label>
                                <input type="number" class="form-control" id="collectAmount" required step="0.01" min="0.01">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุชุงุฑูุฎ ุงูุชุญุตูู *</label>
                                <input type="date" class="form-control" id="collectDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุทุฑููุฉ ุงูุฏูุน *</label>
                                <select class="form-select" id="collectPaymentMethod" required>
                                    <option value="cash">ููุฏู</option>
                                    <option value="bank">ุจููู</option>
                                    <option value="check">ุดูู</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุงููุฑุฌุน</label>
                            <input type="text" class="form-control" id="collectReference">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ููุงุญุธุงุช</label>
                            <textarea class="form-control" id="collectNotes" rows="2"></textarea>
                        </div>
                        
                        <!-- ูุนูููุงุช ุงูุนููู -->
                        <div class="card bg-light mb-3">
                            <div class="card-body">
                                <h6>ูุนูููุงุช ุงูุนููู</h6>
                                <div class="row">
                                    <div class="col-6">
                                        <strong>ุงูุฑุตูุฏ ุงูุญุงูู:</strong> <span id="customerCurrentBalance">0.00</span>
                                    </div>
                                    <div class="col-6">
                                        <strong>ุงูุฑุตูุฏ ุจุนุฏ ุงูุชุญุตูู:</strong> <span id="customerBalanceAfter">0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
                    <button type="button" class="btn btn-success" id="confirmCollectBtn">ุชุญุตูู</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ูุงูุฐุฉ ุณุฏุงุฏ ุงูููุฑุฏูู -->
    <div class="modal fade" id="paySuppliersModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ุณุฏุงุฏ ููููุฑุฏูู</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="paymentForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ุงูููุฑุฏ *</label>
                                <select class="form-select" id="paymentSupplierSelect" required>
                                    <option value="">ุงุฎุชุฑ ุงูููุฑุฏ...</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงููุจูุบ *</label>
                                <input type="number" class="form-control" id="paymentAmount" required step="0.01" min="0.01">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุชุงุฑูุฎ ุงูุณุฏุงุฏ *</label>
                                <input type="date" class="form-control" id="paymentDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุทุฑููุฉ ุงูุฏูุน *</label>
                                <select class="form-select" id="paymentPaymentMethod" required>
                                    <option value="cash">ููุฏู</option>
                                    <option value="bank">ุจููู</option>
                                    <option value="check">ุดูู</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุงููุฑุฌุน</label>
                            <input type="text" class="form-control" id="paymentReference">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ููุงุญุธุงุช</label>
                            <textarea class="form-control" id="paymentNotes" rows="2"></textarea>
                        </div>
                        
                        <!-- ูุนูููุงุช ุงูููุฑุฏ -->
                        <div class="card bg-light mb-3">
                            <div class="card-body">
                                <h6>ูุนูููุงุช ุงูููุฑุฏ</h6>
                                <div class="row">
                                    <div class="col-6">
                                        <strong>ุงูุฑุตูุฏ ุงูุญุงูู:</strong> <span id="supplierCurrentBalance">0.00</span>
                                    </div>
                                    <div class="col-6">
                                        <strong>ุงูุฑุตูุฏ ุจุนุฏ ุงูุณุฏุงุฏ:</strong> <span id="supplierBalanceAfter">0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
                    <button type="button" class="btn btn-primary" id="confirmPaymentBtn">ุณุฏุงุฏ</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ูุงูุฐุฉ ูุฑุชุฌุน ูุจูุนุงุช -->
    <div class="modal fade" id="salesReturnModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ูุฑุชุฌุน ูุจูุนุงุช</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="salesReturnForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ุงูุนููู *</label>
                                <select class="form-select" id="salesReturnCustomerSelect" required>
                                    <option value="">ุงุฎุชุฑ ุงูุนููู...</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ุงููุงุชูุฑุฉ</label>
                                <select class="form-select" id="salesReturnInvoiceSelect">
                                    <option value="">ุงุฎุชุฑ ุงููุงุชูุฑุฉ...</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุชุงุฑูุฎ ุงููุฑุชุฌุน *</label>
                                <input type="date" class="form-control" id="salesReturnDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงููุจูุบ *</label>
                                <input type="number" class="form-control" id="salesReturnAmount" required step="0.01" min="0.01">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุณุจุจ ุงููุฑุชุฌุน *</label>
                            <select class="form-select" id="salesReturnReason" required>
                                <option value="">ุงุฎุชุฑ ุงูุณุจุจ...</option>
                                <option value="damaged">ุชูู ุงูููุชุฌ</option>
                                <option value="wrong_item">ููุชุฌ ุฎุงุทุฆ</option>
                                <option value="defective">ููุชุฌ ูุนูุจ</option>
                                <option value="other">ุฃุณุจุงุจ ุฃุฎุฑู</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุชูุงุตูู ุงููุฑุชุฌุน</label>
                            <textarea class="form-control" id="salesReturnDetails" rows="3" placeholder="ูุตู ุชูุตููู ูููุฑุชุฌุน..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
                    <button type="button" class="btn btn-warning" id="confirmSalesReturnBtn">ุชุณุฌูู ุงููุฑุชุฌุน</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ูุงูุฐุฉ ูุฑุชุฌุน ูุดุชุฑูุงุช -->
    <div class="modal fade" id="purchaseReturnModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ูุฑุชุฌุน ูุดุชุฑูุงุช</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="purchaseReturnForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ุงูููุฑุฏ *</label>
                                <select class="form-select" id="purchaseReturnSupplierSelect" required>
                                    <option value="">ุงุฎุชุฑ ุงูููุฑุฏ...</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงุฎุชุฑ ูุงุชูุฑุฉ ุงูุดุฑุงุก</label>
                                <select class="form-select" id="purchaseReturnInvoiceSelect">
                                    <option value="">ุงุฎุชุฑ ุงููุงุชูุฑุฉ...</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ุชุงุฑูุฎ ุงููุฑุชุฌุน *</label>
                                <input type="date" class="form-control" id="purchaseReturnDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ุงููุจูุบ *</label>
                                <input type="number" class="form-control" id="purchaseReturnAmount" required step="0.01" min="0.01">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุณุจุจ ุงููุฑุชุฌุน *</label>
                            <select class="form-select" id="purchaseReturnReason" required>
                                <option value="">ุงุฎุชุฑ ุงูุณุจุจ...</option>
                                <option value="damaged">ุชูู ุงูููุชุฌ</option>
                                <option value="wrong_item">ููุชุฌ ุฎุงุทุฆ</option>
                                <option value="defective">ููุชุฌ ูุนูุจ</option>
                                <option value="other">ุฃุณุจุงุจ ุฃุฎุฑู</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">ุชูุงุตูู ุงููุฑุชุฌุน</label>
                            <textarea class="form-control" id="purchaseReturnDetails" rows="3" placeholder="ูุตู ุชูุตููู ูููุฑุชุฌุน..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅูุบุงุก</button>
                    <button type="button" class="btn btn-danger" id="confirmPurchaseReturnBtn">ุชุณุฌูู ุงููุฑุชุฌุน</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== ููุชุจุงุช JavaScript ========== -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- ูููุงุช ุงููุธุงู -->
    <script src="M-core.js"></script>
    <script src="M-database.js"></script>
    <script src="M-accounting.js"></script>
</body>
</html>